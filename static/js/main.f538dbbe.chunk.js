(this["webpackJsonpstaff-list-ux-react-query"]=this["webpackJsonpstaff-list-ux-react-query"]||[]).push([[0],{184:function(e,t,n){},185:function(e,t,n){},189:function(e,t,n){},190:function(e,t,n){},191:function(e,t,n){},193:function(e,t,n){},194:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n(31),o=n.n(a),i=n(22),c=(n(152),n(11)),s=n(7),u=n.n(s),l=n(13),d=["all","kanto","johto","hoenn","sinnoh","unova","kalos","alola","galar"],f=function(e){var t=e;return null===(null===t||void 0===t?void 0:t.next)||"string"===typeof(null===t||void 0===t?void 0:t.next)&&null===(null===t||void 0===t?void 0:t.previous)||"string"===typeof(null===t||void 0===t?void 0:t.previous)&&!(null===t||void 0===t?void 0:t.results.some((function(e){return!function(e){var t=e;return"string"===typeof(null===t||void 0===t?void 0:t.name)&&"string"===typeof(null===t||void 0===t?void 0:t.url)}(e)})))},v=function(e){var t=e;return"number"===typeof(null===t||void 0===t?void 0:t.id)&&"string"===typeof(null===t||void 0===t?void 0:t.name)&&"string"===typeof(null===t||void 0===t?void 0:t.species.name)&&"string"===typeof(null===t||void 0===t?void 0:t.species.url)&&!(null===t||void 0===t?void 0:t.types.some((function(e){return!function(e){var t=e;return"number"===typeof(null===t||void 0===t?void 0:t.slot)&&"string"===typeof(null===t||void 0===t?void 0:t.type.name)&&"string"===typeof(null===t||void 0===t?void 0:t.type.url)}(e)})))&&"string"===typeof(null===t||void 0===t?void 0:t.sprites.frontDefault)&&"string"===typeof(null===t||void 0===t?void 0:t.sprites.other.officialArtwork.frontDefault)},p=function(e){var t=e;return"string"===typeof(null===t||void 0===t?void 0:t.name)&&"string"===typeof(null===t||void 0===t?void 0:t.url)},j=function(e){var t=e;return"string"===typeof(null===t||void 0===t?void 0:t.name)&&p(null===t||void 0===t?void 0:t.language)},b=function(e){var t=e;return!(null===t||void 0===t?void 0:t.flavorTextEntries.some((function(e){return!function(e){var t=e;return"string"===typeof(null===t||void 0===t?void 0:t.flavorText)&&p(null===t||void 0===t?void 0:t.language)}(e)})))&&!(null===t||void 0===t?void 0:t.genera.some((function(e){return!function(e){var t=e;return"string"===typeof(null===t||void 0===t?void 0:t.genus)&&p(null===t||void 0===t?void 0:t.language)}(e)})))&&!(null===t||void 0===t?void 0:t.names.some((function(e){return!j(e)})))},h=function(e){var t=e;return"string"===typeof(null===t||void 0===t?void 0:t.name)&&!(null===t||void 0===t?void 0:t.names.some((function(e){return!j(e)})))},m=n(39),x=n(123),O=n.n(x),g={timeout:8e3,retry:3,hooks:{afterResponse:[function(){var e=Object(l.a)(u.a.mark((function e(t,n,r){var a,o,i,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Blob,e.t1=JSON,e.t2=O.a,e.next=5,r.json();case 5:return e.t3=e.sent,e.t4={deep:!0},e.t5=(0,e.t2)(e.t3,e.t4),e.t6=e.t1.stringify.call(e.t1,e.t5,null,2),e.t7=[e.t6],e.t8={type:"application/json"},a=new e.t0(e.t7,e.t8),o=r.headers,i=r.status,c=r.statusText,s={headers:o,status:i,statusText:c},e.abrupt("return",new Response(a,s));case 15:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()]}},y=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(c.a)(Object(c.a)({},g),n),e.next=3,m.a.get(t,r);case 3:return a=e.sent,e.next=6,a.json();case 6:if(o=e.sent,f(o)){e.next=9;break}throw Error("API type error");case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(c.a)(Object(c.a)({},g),n),e.next=3,m.a.get(t,r);case 3:return a=e.sent,e.next=6,a.json();case 6:if(o=e.sent,v(o)){e.next=9;break}throw Error("API type error");case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(c.a)(Object(c.a)({},g),n),e.next=3,m.a.get(t,r);case 3:return a=e.sent,e.next=6,a.json();case 6:if(o=e.sent,b(o)){e.next=9;break}throw Error("API type error");case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(c.a)(Object(c.a)({},g),n),e.next=3,m.a.get(t,r);case 3:return a=e.sent,e.next=6,a.json();case 6:if(o=e.sent,h(o)){e.next=9;break}throw Error("API type error");case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=n(32),N=n(0),A=n(221),D=n(219),T=n(124),I=n.n(T),S=n(61),M=n(68),Q=n(73),C=n(224),R={0:"\u30b5\u30fc\u30d0\u30a8\u30e9\u30fc\u3067\u3059"},z=function(e){Object(M.a)(n,e);var t=Object(Q.a)(n);function n(e){var a;return Object(S.a)(this,n),(a=t.call(this,e)).componentDidCatch=function(e,t){var n=a.props.onError;n&&n(),console.error(e,t)},a.render=function(){var e=a.props,t=e.children,n=e.statusMessages,o=void 0===n?{}:n,i=a.state,s=i.hasError,u=i.error,l=Object(c.a)(Object(c.a)({},R),o);if(s){var d,f=null===u||void 0===u||null===(d=u.response)||void 0===d?void 0:d.status;return f&&Object.keys(l).includes(String(f))?Object(r.jsx)(C.a,{warning:!0,children:l[f]}):Object(r.jsx)(C.a,{error:!0,children:l[0]})}return t},a.state={hasError:!1,error:null},a}return n}(N.PureComponent);z.getDerivedStateFromError=function(e){return{hasError:!0,error:e}};var F=z,L=n(220),H=n(218),q=(n(184),function(e){var t=e.size,n=void 0===t?"medium":t;return Object(r.jsx)("div",{className:"spinner",children:Object(r.jsx)(H.a,{size:n,inline:"centered",active:!0,children:"\u8aad\u307f\u8fbc\u307f\u4e2d..."})})}),J=n(223),B=n(222),_=(n(185),function(e){var t,n,a,o,i,c=e.pokemon,s=e.species,u=e.types;return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(J.a,{className:"card-container card-container-type-".concat(u[0].name),children:[Object(r.jsxs)("div",{className:"card-header",children:[Object(r.jsxs)("div",{children:[Object(r.jsx)(J.a.Meta,{textAlign:"left",children:c.id}),Object(r.jsx)(B.a,{size:"mini",src:c.sprites.frontDefault})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)(J.a.Header,{textAlign:"center",children:null===(t=s.names.find((function(e){return"ja"===e.language.name})))||void 0===t?void 0:t.name}),Object(r.jsx)(J.a.Header,{textAlign:"center",children:c.name})]}),Object(r.jsx)("div",{className:"card-header__type",children:u.map((function(e){return e.names.map((function(e){return"ja-Hrkt"===e.language.name&&Object(r.jsx)(J.a.Header,{textAlign:"right",children:e.name},e.name)}))}))})]}),Object(r.jsx)("div",{className:"card-image card-image-type-".concat(u[0].name),children:Object(r.jsx)(B.a,{size:"large",src:c.sprites.other.officialArtwork.frontDefault,rounded:!0})}),Object(r.jsxs)("div",{className:"card-genera",children:[Object(r.jsx)(J.a.Description,{children:null===(n=s.genera.find((function(e){return"ja"===e.language.name})))||void 0===n?void 0:n.genus}),Object(r.jsx)(J.a.Description,{children:null===(a=s.genera.find((function(e){return"en"===e.language.name})))||void 0===a?void 0:a.genus})]}),Object(r.jsxs)("div",{className:"card-description",children:[Object(r.jsx)(J.a.Description,{children:null===(o=s.flavorTextEntries.find((function(e){return"ja"===e.language.name})))||void 0===o?void 0:o.flavorText}),Object(r.jsx)(J.a.Description,{children:null===(i=s.flavorTextEntries.find((function(e){return"en"===e.language.name})))||void 0===i?void 0:i.flavorText})]})]},c.id)})}),G=function(e){var t=e.url,n=Object(i.useQuery)([t,"pokemon"],(function(){return k(t)}),{enabled:!!t}).data;if(!n)throw Error("getPokemon error");var a=Object(i.useQuery)([n.species.name,"species"],(function(){return w(n.species.url)}),{enabled:!!n.species.url}).data;if(!a)throw Error("getSpecies error");var o=Object(i.useQuery)([n.types[0].type.name,"type"],(function(){return E(n.types[0].type.url)}),{enabled:!!n.types[0]}).data;if(!o)throw Error("getType error");var c=Object(i.useQuery)([n.types.length>=2?n.types[1].type.name:n.types[0].type.name,"type"],(function(){return E(n.types.length>=2?n.types[1].type.url:n.types[0].type.url)}),{enabled:n.types.length>=2}).data;if(!c)throw Error("getType error");var s=n.types.length>=2?[o,c]:[o];return Object(r.jsx)(_,{pokemon:n,species:a,types:s})},K=(n(189),function(e){var t=e.result;return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(F,{children:Object(r.jsx)(N.SuspenseList,{children:Object(r.jsx)(N.Suspense,{fallback:"",children:Object(r.jsx)(J.a.Group,{className:"cards-container",children:t.results.map((function(e){return Object(r.jsx)(G,{url:e.url},e.name)}))})})})})})}),U=function(e){var t=e.root,n=void 0===t?null:t,r=e.onIntersect,a=e.threshold,o=void 0===a?1:a,i=e.rootMargin,c=void 0===i?"0px":i,s=e.enabled,u=void 0===s||s,l=Object(N.useState)(null),d=Object(P.a)(l,2),f=d[0],v=d[1],p=Object(N.useCallback)((function(e){null!==e&&v(e)}),[]),j=Object(N.useCallback)((function(){return new IntersectionObserver((function(e){return e.forEach((function(e){return e.isIntersecting&&r()}))}),{root:n&&n.current,rootMargin:c,threshold:o})}),[n,r,o,c]);return Object(N.useEffect)((function(){if(u){var e=f;if(e){var t=j();return t.observe(e),function(){t.unobserve(e)}}}}),[u,f,j]),{loadMoreRef:p}},V=function(e){var t=e.url,n=Object(i.useInfiniteQuery)("pokemons-".concat(t),function(){var e=Object(l.a)(u.a.mark((function e(n){var r,a,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.pageParam,a=void 0===r?t:r,e.next=3,y(a);case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{getNextPageParam:function(e){return e.next},enabled:!0}),a=n.data,o=n.fetchNextPage,s=n.hasNextPage;if(!a)throw Error("getPokemonsResult error");var d=U({onIntersect:o,enabled:s}).loadMoreRef;return Object(r.jsxs)(r.Fragment,{children:[null===a||void 0===a?void 0:a.pages.map((function(e){return Object(r.jsx)(K,{result:e},e.next)})),Object(r.jsx)(L.a,Object(c.a)(Object(c.a)({},{ref:d}),{},{textAlign:"center",children:s&&Object(r.jsx)(q,{size:"medium"})}))]})},W=(n(190),"https://pokeapi.co/api/v2/pokemon?"),X={all:"".concat(W,"limit=24&offset=0"),kanto:"".concat(W,"limit=24&offset=0"),johto:"".concat(W,"limit=24&offset=151"),hoenn:"".concat(W,"limit=24&offset=251"),sinnoh:"".concat(W,"limit=24&offset=386"),unova:"".concat(W,"limit=24&offset=493"),kalos:"".concat(W,"limit=24&offset=649"),alola:"".concat(W,"limit=24&offset=721"),galar:"".concat(W,"limit=24&offset=809")},Y=function(e){var t=e.regionList,n=e.prefetch,a=void 0===n?function(){}:n,o=Object(N.useState)("all"),i=Object(P.a)(o,2),c=i[0],s=i[1],u=Object(N.useTransition)(),l=Object(P.a)(u,2),d=l[0],f=l[1],v=Object(N.useRef)(0),p=t.map((function(e){return{key:e,name:I()(e),onClick:function(){c?f((function(){return s(e)})):s(e)},onMouseOver:function(){return a(X[e])},active:e===c}}));return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("header",{className:"app-header",children:Object(r.jsx)("h1",{children:"My PokeDex"})}),Object(r.jsx)(A.a,{items:p,text:!0}),Object(r.jsx)(D.a,{}),Object(r.jsx)("div",{className:d?"loading":"",children:Object(r.jsx)(F,{statusMessages:{404:"".concat(c,"\u3068\u3044\u3046\u30ea\u30fc\u30b8\u30e7\u30f3\u304c\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093")},onError:function(){v.current+=1},children:Object(r.jsx)(N.SuspenseList,{children:Object(r.jsx)(N.Suspense,{fallback:"",children:Object(r.jsx)(V,{url:c?X[c]:X.all})})})},v.current)})]})},Z=function(e){var t=e.enablePrefetch,n=void 0!==t&&t,a=Object(i.useQueryClient)(),o=n?{regionList:d,prefetch:function(e){(function(){var t=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.prefetchQuery([e,"pokemons"],(function(){return y(e)}));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.error(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}})()()}}:{regionList:d};return Object(r.jsx)(Y,Object(c.a)({},o))},$=(n(191),function(){return Object(r.jsx)(Z,{enablePrefetch:!0})}),ee=(n(192),n(193),new i.QueryClient({defaultOptions:{queries:{retry:0,suspense:!0},mutations:{retry:0}}})),te=document.getElementById("root");o.a.createRoot(te).render(Object(r.jsxs)(i.QueryClientProvider,{client:ee,children:[Object(r.jsx)($,{}),!1]}))}},[[194,1,2]]]);
//# sourceMappingURL=main.f538dbbe.chunk.js.map